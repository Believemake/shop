<view class="container"><view class="cart-list"><block wx:for="{{cartList}}" wx:for-item="item" wx:for-index="index" wx:key="id"><block><view class="{{['cart-item',(index!==cartList.length-1)?'b-b':'']}}"><view class="checkbox"><view data-event-opts="{{[['tap',[['check',['item',index]]]]]}}" class="{{['yticon icon-xuanzhong2 chex',(item.checked)?'checked':'']}}" bindtap="__e"></view></view><view class="image-warpper"><image class="{{[item.loaded]}}" src="{{item.image}}" mode="aspectFill" lazy-load data-event-opts="{{[['load',[['onImageLoad',['cartList',index]]]],['error',[['onImageError',['cartList',index]]]]]}}" bindload="__e" binderror="__e"></image></view><view class="cart-right"><text class="clamp title">{{item.title}}</text><text class="clamp arrt">{{item.attr_val}}</text><text class="price">{{"￥"+item.price}}</text><uni-number-box class="step" vue-id="{{'1-'+index}}" min="{{1}}" max="{{item.stock}}" value="{{item.number>item.stock?item.stock:item.number}}" isMax="{{item.number>=item.stock?true:false}}" isMin="{{item.number===1}}" index="{{index}}" data-event-opts="{{[['^eventChange',[['numberChange']]]]}}" bind:eventChange="__e" bind:__l="__l"></uni-number-box></view><text data-event-opts="{{[['tap',[['deleteCartItem',[index]]]]]}}" class="del-btn yticon icon-fork" bindtap="__e"></text></view></block></block></view><view class="action-section"><view><view data-event-opts="{{[['tap',[['check',['all']]]]]}}" class="{{['yticon icon-xuanzhong2 chexs',(allChecked)?'checked':'']}}" catchtap="__e"></view><view data-event-opts="{{[['tap',[['deleteList',['$event']]]]]}}" class="{{['clear-btn',(allChecked)?'show':'']}}" catchtap="__e">清空</view></view><view class="total-box"><text class="price">{{"￥"+total}}</text><text class="coupon">优惠:<text>20</text>元</text></view><button data-event-opts="{{[['tap',[['go',['$event']]]]]}}" class="no-border confirm-btn" bindtap="__e">去结算</button></view></view>